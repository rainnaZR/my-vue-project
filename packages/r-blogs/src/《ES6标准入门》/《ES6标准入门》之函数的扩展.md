《ES6标准入门》阅读总结

# 第七章 函数的扩展

### 1. 函数参数的默认值

参数变量是默认声明的，不能用let或const重复声明。

```
function(x = 1){
    return x;
}
```

参数传值为undefined时，会触发该参数的默认值。

```
function foo(x=5, y=6){
    console.log(x, y);
}

foo(undefined, null);
//输出5 null
```

**作用域**

当参数默认值是变量时，先采用括号内的当前函数作用域，然后才是全局作用域。参数的默认值不是在定义时执行，而是在运行时执行。

```
let x = 1;
function f(y = x){
	let x = 2;
	console.log(y);
}

f();  //1
```

### 2. rest参数

(...变量名）为rest参数，用于获取函数的多余参数，将多余的参数放入数组中。

```
function f(...y){
	console.log(y);
}

f(1,2,3,'a','b');  
//输出[1, 2, 3, "a", "b"]
```

rest参数之后不能再有其他参数，否则报错。

### 3. 扩展运算符

...，是rest参数的逆运算，将数组转换为用逗号分隔的参数序列。如果参数传的是数组，可使用...扩展符将参数变成参数序列，而非数组形式。

```
console.log(...[1,2,3])

//1, 2, 3
```

**替代数组的apply方法**

```
//ES5写法
function f(x, y, z){};
var args = [0, 1, 2];
f.apply(null, args);  //args要传数组

//ES6的写法
function f(x, y, z){};
var args = [0, 1, 2];
f(...args);
```

**扩展运算符的运用**

1）合并数组

```
//ES5写法
[1, 2].concat(more)

//ES6写法
[1, 2, ...more]

//ES6写法
var a = [1,2];
var b = [3,4];
var c = [5,6];
[...a, ...b, ...c]
//输出[1, 2, 3, 4, 5, 6]
```

2）与解构赋值结合

```
const [first, ...rest] = [1, 2, 3, 4];
first //1
rest //[2, 3, 4]
```

3）字符串

```
var str = 'hello';
[...str]
//输出["h", "e", "l", "l", "o"]
```

4）类数组

可以使用扩展运算符将伪数组转换为真正的数组。

```
var nodeList = document.querySelectorAll('div');
var arr = [...nodeList];
```

### 4. 箭头函数

```
(num1, num2) => num1 + num2

[1, 2, 3].map(x => x * x);
```

箭头函数有以下注意点：

1）函数体内的this指定义时所在的对象，而不是使用时的对象。

2）不可以当做构造函数。

3）不可以使用arguments对象，该对象在函数体内不存在。

4）不可以使用yeild命令。

箭头函数内部没有自己的this，内部的this指向外层代码块的this。箭头函数不能调用apply(), call(), bind()方法。

### 5. 函数绑定

:: 为函数绑定运算符，双冒号左边是一个对象，右边是一个函数。会自动将左边对象的this绑定到右边的函数上。

### 6. 尾调用优化

尾调用优化，即只保留内层函数的调用帧，不要用到外层函数的内部变量，这样内部函数的调用帧才会取代外层函数的调用帧。

```
//尾调用
function f(x){
    return g(x);
}
```


