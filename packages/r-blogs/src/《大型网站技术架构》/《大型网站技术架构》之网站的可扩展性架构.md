# 《大型网站技术架构》之第七章：网站的可扩展性架构


## 1. 构建可扩展的网站架构

- 扩展性：对现有系统影响最小的情况下，系统功能可持续扩展或提升的能力。

- 伸缩性：利用集群的方式增加服务器数量，提高系统的整体事务吞吐能力。

## 2. 利用分布式消息队列降低系统耦合性

### 2.1 事件驱动架构

在低耦合的模块之间传输事件消息，保持模块的松散耦合，并借助事件消息的通信完成模块间合作。消息对列表利用发布-订阅模式工作，消息发布者发布消息，一个或者多个消息接收者订阅消息。消息发送者是消息源，在对消息进行处理后将消息发送至分布式消息队列，消息接收者从分布式消息队列获取该消息后继续进行处理。

### 2.2 分布式消息队列

将数据结构部署到独立的服务器上，应用程序可以通过远程访问接口使用分布式消息队列，进行消息存取操作，进而实现分布式的异步调用。

### 2.3 利用分布式服务打造可复用的业务平台

分布式消息队列通过消息对象分解系统耦合性，不同子系统处理同一个消息；分布式服务通过接口分解系统耦合性，不同子系统通过相同的接口描述进行服务调用。主要措施是对服务进行横向拆分和纵向拆分。

#### 分布式服务的需求和特点

- 负载均衡
- 失效转移
- 高效的远程通信
- 整合异构系统
- 对应用最小侵入
- 版本管理
- 实时监控

#### Dubbo

服务消费者呈现通过服务接口使用服务，服务接口通过代理加载具体服务，具体服务可以是本地代码，也可以是远程服务。应用程序只需调用服务接口，服务框架根据配置自动调用本地或远程实现。

服务端框架客户端模块通过服务注册中心加载服务提供者列表，查找需要的服务接口，并根据配置的负载均衡策略将服务调用请求发送到某台服务提供者服务器。

### 2.4 可扩展的数据结构

### 2.5 利用开放平台建设网站生态圈

- API接口
- 协议转：数据转换成内部服务可用的形式。
- 安全：身份识别，权限控制。
- 审计：监控，计费等。
- 路由：将开放平台的各种访问路由映射到具体的内部服务。
- 流程：将离散服务整合成独立服务开放出去。







