
# 《大型网站技术架构》之大型网站架构模式


每一个模式描述了一个在我们周围不断重复发生的问题及该问题解决方案的核心。这样，你就能一次又一次使用该方案而不必做重复工作。

# 第二章：大型网站架构模式

## 1. 网站架构模式

### 1.1 分层

将系统在横向维度上切分成几个部分，每个部分负责一部分相对比较单一的职责，然后通过上层对下层的依赖和调用组成一个完整的系统。

网络的7层通信协议：计算机硬件，操作系统，应用软件等也是一种分层结构。

### 1.2 分割

分层是横向方向上的切分，分割是纵向方面的切分。比如应用层，将不同业务进行分割。

### 1.3 分布式

分为：分布式应用和服务；分布式静态资源，分布式数据和存储，分布式计算。

### 1.4 集群

集群即多台服务器部署相同应用构成一个集群，通过负载均衡设备共同对外提供服务。当某台服务器故障时，负载均衡设备将请求转发到集群中的其他服务器上。


### 1.5 缓存

分为： cdn，反向代理（缓存资源，无需将请求转发给应用服务器），本地缓存，分布式缓存。

缓存的两个条件：一是某些被频繁访问的数据应该放在缓存中；二是数据在某个时间段内有效，不会很快过期的数据。

### 1.6 异步

在分布式系统中，多个服务器集群使用分布式消息队列实现异步。

### 1.7 冗余

数据冗余备份，当服务器宕机时，及时将数据和服务转移到其他正常机器上。

### 1.8 自动化

自动化部署，自动化测试，自动化监控，自动化报警，自动化降级等措施。

### 1.9 安全

对代码进行编码，验证码识别，敏感信息过滤，风险控制等。

## 2. 新浪架构模式

系统分为三个层次：

1. 最下层是基础服务层，提供数据库，缓存，存储，搜索等数据服务，以及其他一些基础技术服务。
2. 中间层是平台服务和应用服务窗。分割成独立的服务模块。
3. 最上层是api和新浪微博的业务层，各种客户端和第三方应用调用api形成一个生态系统。