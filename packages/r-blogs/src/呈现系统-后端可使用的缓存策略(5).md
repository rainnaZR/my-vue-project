# 后端优化方案

### 呈现系统优化方案

方案的核心点在于首屏要快且铺满整屏，除首屏外的页面数据要求并发请求。

#### 拆分出首屏请求，定义新接口，由后端来取出首屏数据和此时到达的区块id

涉及到的点有

- 定义首屏数据大小 
- 首屏接口定义 
- 搭建后台需要支持 
- 资源投放需要支持 
- 静态化，首屏接口的后缀也为.shtml,且需要后端统一封装静态化失效时间  

#### 非首屏的获取投放数据接口

- 基本保持不变，仍然由前端并发请求，区别在于需要等首屏数据回来，依赖已经到达的区块id去请求下一个区块id  
- 投放数据返回值格式需要改动，具体和首屏的返回值保持一致  
- 前端需要区分是id类还是非id类区块，非id类一次请求5个，id类一次请求1个（性能考虑） 

#### 框架数据的改动

- 在返回值中加上每个区块是否为id类的标识 
- 电梯导航的问题, 电梯导航会先出现，但是只有等到该导航的模块数据加载完成，此导航才可以点击生效  
- 商品区块的数据限制, 目前展示限制为50

#### 后续考虑的优化点

- 首屏数据合进框架数据，甚至合进同步数据
- 另起域名访问投放数据