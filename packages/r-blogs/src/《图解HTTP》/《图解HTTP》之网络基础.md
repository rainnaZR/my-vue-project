《图解HTTP》阅读总结：

# 第一章 网络基础

目前已提出三项WWW构建技术，分别是：

1）把SGML(标准通用标记语言)作为页面的文本标记语言的HTML（超文本标记语言）。

2）作为文档传递协议的HTTP。

3）指定文档所在地址的URL（统一资源定位符）。

### 1. TCP/IP协议族

协议中存在各种内容，从电缆的规格到IP指定的选定方法，寻找异地用户的方法，双方建立通信的顺序，web页面显示需要处理的步骤，这样把互联网关联的协议集合起来就是TCP/IP。

### 2. TCP/IP的分层管理

TCP/IP协议按层次分为4层：应用层，传输层，网络层，数据链路层。

1）应用层

TCP/IP协议族内预存了各类通用的应用服务。比如FTP,DNS等。

2）传输层

提供处于网络连接中的两台计算机之间的数据传输，包括TCP和UDP等。

3）网络层

网络层处理在网络上流动的数据包。该层规定通过怎样的路径到达对方计算机，并把数据传输给对方。

4）链路层

处理网络连接中的硬件部分。包括控制操作系统，硬件的设备驱动，光纤等。

### 3. IP, TCP, DNS

**IP协议**

IP国际协议处于网络层，IP协议的作用是把各种数据包传送给对方，需要满足两个条件：IP地址和MAC地址。IP地址和MAC地址进行配对。IP地址可变，MAC地址不可变。

1）IP地址：指明节点被分配到的地址。

2）MAC地址：网卡所属的固定地址。


**TCP协议**

TCP协议处于传输层，提供可靠的字节流服务。TCP将大块数据分隔成以报文段为单位的数据包进行管理。TCP协议采用三次握手的策略确认数据是否正确送达。

发送端首先发送一个带SYN标志的数据包给对方。接收端收到后，回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后，发送端再回传一个带ACK标志的数据包，代表握手结束。

**DNS协议**

DNS位于应用层的协议。提供域名到IP地址的解析服务，或逆向从IP地址反查域名的服务。

### 4. URI和URL

URI是统一资源标识符，URI用字符串标识某一互联网资源，而URL表示资源的地点，也就是资源所处的位置。URL是URI的子集。

**绝对URI的格式：**

```
http://user:pass@www.example.cn:80/index/act.html?name=11#box1
```

1）http 为协议方案名，不区分字母大小写，最后附一个冒号。也可以使用data: 或者javascript: 这类指定数据或脚本程序的方案名。

2）user:pass 指定登录信息，为可选项。

3）www.example.cn 指服务器地址，地址可以是域名或者IP地址。

4）80 指定服务器连接的网络端口号，可选项。

5）index/act.html 带层次的文件路径，用服务器上的文件路径来定位特定的资源。

6）name=11 查询字符串，url的参数。

7）box1 片段标识符，标记已获取资源中的子资源，url的hash值。



### 5. HTTP协议的通信流程

1）客户端发起链接请求:http://www.test.com

2）DNS服务器返回域名对应的IP地址。

3）客户端向对应IP地址发送请求报文，步骤如下。

4）应用层HTTP协议的职责：生成针对目标Web服务器的HTTP请求报文。

5）传输层TCP协议的职责：将HTTP请求报文分割成报文段，再把每个报文段可靠的传递给对方。

6）网络层IP协议的职责：搜索对方的地址，一边中转，一边传送数据包。

7）链路层：对应的服务器在链路层收到数据，按序往上层发送，一直到应用层。

8）传输层TCP协议的职责：从客户端接收到的报文段后，按序号以原来的顺序重组请求报文。

9）应用层HTTP协议的职责：对web服务器请求内容进行处理。

10）此时服务端真正接收到由客户端发送过来的HTTP请求。

11）请求的处理结果同样利用TCP/IP通信协议向用户回传。
