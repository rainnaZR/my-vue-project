《图解HTTP》阅读总结：

# 第五章 与HTTP协作的Web服务器

一台服务器可搭建多个独立域名的web网站，也可作为通信路径上的中转服务器提升传输效率。

### 1. 用单台虚拟主机实现多个域名

使用虚拟主机的功能，虚拟主机可以寄存多个不同的主机名和域名的web网站。当在相同IP地址下，HTTP请求时需要在HOST首部内指定完整的主机名或域名的URI来做区分。

### 2. 通信数据转发

HTTP通信时，除了客户端和服务器外，还有一些用于通信数据转发的应用程序，比如代理，网关，隧道等。

**代理**

接收从客户端发来的请求并转发给服务器，同时接收服务器的响应并转发给客户端。代理不改变请求URI。

使用代理的理由：利用缓存技术减少带宽的流量，组织内部对特定网站的访问控制等等。代码方法如下：

1）缓存代理

代理转发响应时，缓存代理预先将资源副本缓存在代理服务器上，下次再访问时直接代理服务器返回，不需要经过源服务器。

2）透明代理

转发请求或响应时，对报文不做任何处理。对报文进行处理的代理叫非透明代理。

**网关**

接收从客户端发来的请求，转发其他服务器通信数据的服务器。它可以像源服务器一样对请求进行处理。其工作机制跟代理类似。网关能使通信线路上的服务器提供非HTTP协议服务。

**隧道**

在相隔甚远的服务器和客户端之间进行中转，确保安全通信。隧道本身不解析HTTP请求，请求保持原样传输。

### 3. 缓存

缓存服务器向源服务器确认资源的有效性。如果失效，则缓存服务器会向源服务器拉取新资源。分为服务端缓存和客户端缓存。




