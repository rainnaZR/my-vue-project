《你不知道的JS》上卷 第一部分 作用域和闭包

# 第三章 函数作用域和块作用域

## 1. 函数中的作用域

JS具有基于函数的作用域。函数作用域是指：属于这个函数的全部变量都可以在整个函数的范围内使用及复用。

```
function a(){
    var b = 1
}
```

## 2. 隐藏内部实现

**全局命名空间**

在全局作用域中声明一个对象，这个对象可以用作库的命名空间，将所有需要暴露给外界的功能都封装在这个对象内。

**模块管理**

利用作用域的规则将标识符保存在私有，无冲突的作用域中。

## 3. 函数作用域

**函数声明**

```
// 函数声明
function foo(){
    ...
}
```

**函数表达式**

```
// 函数表达式
var foo = function(){
    ...
}
```

**匿名函数**

```
// 匿名函数表达式
function(){
    ...
}
```

**具名函数**

```
function foo(){
    ...
}
```

**IIFE 立即执行函数表达式**

```
(function (){
    ...
})()
```


## 4. 块作用域

```
for(var i=0; i<10; i++){
    ...
}
```

块作用域是将代码从在函数中隐藏的信息扩展为在块中隐藏信息。

以下具有块级作用域的写法：

**with**

**try/catch**

```
try{
    undefined();
} catch(err) { // 块级作用域
    ....
}
```

**let**

```
if(foo){
    {  // 显式的块
        let a = 1
    }
}
```

在声明中的任何位置都可以使用{ ... } 括号来为let创建一个用于绑定的作用域块。let进行的声明不会存在块作用域中提升。为变量显式声明块级作用域，可利用JS的垃圾回收。

**const**

const也可以创建块级作用域，只能定义常量。

## 5. 小结

函数是JS常见的作用域单元，但是函数不是唯一的作用域单元，还有块级作用域，也就是属于某个代码块内（通常指{...}内部）。





