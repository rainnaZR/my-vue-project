《狼书》阅读总结

# 第三章 了不起的Node.js

## 1. 架构升级

从LAMP 到 MEAN。

### 1.1 前后端分离

1. 表现层：处理HTTP请求，直接返回html渲染，或返回API结果。
2. 业务逻辑层：完成具体的业务逻辑。
3. 数据访问层：访问基础数据，例如数据库，缓存和消息队列等。

### 1.2 页面即服务

页面即服务是使用自动化手段将业务拆分成单个页面进行管理和维护。

### 1.3 Node使用场景

1. 大前端：使用Node.js做前后端分离。
2. API接口：I/O密集型应用。
3. RPC服务：主要对OLTP数据库进行操作。

## 2. 开发流程

#### 预处理器

前端预处理器分类模板引擎（EJS,Jade等），CSS预处理器（PostCss,less,scss等），JS友好语言（ts等）。

#### 构建工具

比如 Grunt, Gulp, Webpack等。

#### API代理

API Proxy在服务端异构API之前，对异构api进行抽象，形成模型层，然后根据不同平台，不同需求，包装成对应的API接口。相当于在后端输出的API接口进行二次包装和转换，输出前端想要的接口。

#### 服务组装

使用Node.js在API Proxy层实现服务组装：

1. 输出API: 前端的异步AJAX请求可以直接访问的API。
2. 渲染辅助：如果是直接渲染，可以采用BigPipe, Websocket协议，需要在服务端组装API，再将结果返回给浏览器。


#### API 网关

Node.js擅长I/O操作，其http模块和stream模块组合使用时非常适合作为代理软件。API网关中有两个重要功能：请求转发和JSONP跨域支持。

#### Serveless

Serveless是一种基于互联网技术的架构理念，采用函数即服务，让开发者只关注应用逻辑，而不必将全部功能都在服务端实现，通过组合多个函数的功能来实现应用程序逻辑。

## 3. 团队优化

1. 工程化。整个开发流程规范化。
2. 模块化。使用npm管理包，每个包即是一个模块。
3. 工具化。

## 4. 全栈

学习全栈的思路：

1. 玩转gulp, webpack, npm等前端工具。
2. 使用Node.js进行前后端分离。
3. 掌握Express, koa等框架。
4. 掌握ejs, jade等模板引擎。
5. 使用nginx。
6. 玩转后端异步流程处理。
7. 玩转后端mongoDB, mysql等对应的node.js模块。






