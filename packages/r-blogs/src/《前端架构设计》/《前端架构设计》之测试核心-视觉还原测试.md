《前端架构设计》阅读总结：

# 第十一章 测试核心-视觉还原测试


### 1. 简介

视觉还原测试让我们将正在开发的版本或者即将部署的版本（新版本）与正确的版本（基线版本）进行视觉对比。这个过程只不过是抓取基线版本的截图，与最新版本进行对比，并找出像素层面的差异。视觉还原测试可以检测出视觉改变。大多数的视觉还原工具分为以下几类：

1）基于页面的比较

Wraith(https://github.com/BBC-News/wraith) 基于页面比较的例子。使用YAML作为设置文件，可以轻松的比较两个不同来源的页面列表的差异。

2）基于组件的比较

BackstopJS是基于组件比较的例子，它可以抓取页面独立的片段进行比较，这样可以写出更有针对性的测试，防止误报。

3）CSS单位测试

Quixote工具用于比较CSS单位的差异，而不是视觉上的差异。

4）基于无头浏览器的测试

Gemini是可以使用PhantomJS的工具，可以在抓取截图之前加载Web页面。PhantomJS是JS实现的Webkit内核的浏览器。



5）基于桌面浏览器的测试

Gemini支持在传统的桌面浏览器上运行测试用例。Gemini使用Selenim服务器打开并操作系统中安装的浏览器，测试更接近真实浏览器。

6）包含脚步库文件

GasperJS可以和PhantomJS协同工作，该工具可以和在浏览器打开的文件进行交互。使用它，可以模拟点击，填充表单等交互操作，而且对结果进行截图。

7）基于图形用户界面的比较工具，支持更改确认

Diffux项目存储历史测试数据，并在web界面中提供测试结果的反馈。

8）基于命令行的比较工具

PhantomCSS是一款基于组件的比较工具。测试结果会输出在命令行终端里。

### 2. 测试工具集

PhantomCSS是下列三种工具的合体：

1）PhantomJS基于webkit的无核浏览器，可以快速渲染页面，并对页面截图。

2）CasperJS是一个导航和脚本工具，对PhantomJS渲染的页面进行交互。用于功能测试。

3）ResembleJS是一个比较引擎，对比两张图片，并找出是否有像素级别的差异。用于UI测试。


